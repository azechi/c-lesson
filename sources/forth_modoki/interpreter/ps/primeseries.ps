/isprime {
    2 0 % n i divisible
    {
        dup 0 eq    % n i d (d == 0)=c1
        2 index     % n i d c1 i
        4 index     % n i d c1 i n
        2 div       % n i d c1 i n/2
        le          % n i d c1 (i % n/2)=c2
        add 2 eq    % n i d (c1 and c2)
    } { % while
        pop                 % n i
        1 index 1 index     % n i n i
        mod 0 eq            % n i divisible

        exch                % n d i
        1 add               % n d i+1
        exch                % n i+1 d
    } while

    0 eq        %n i not(d)
    3 1 roll    %not(d) n i
    pop pop
} def


/primeseries {
    2                       % number index
    {
        1 index 1 index ge  % ... n i (n >= i)
    } { %while

        dup isprime {
            dup 3 1 roll    % (... i) n i
        } if

        1 add               % ... n i+1

    } while % i
    pop pop
} def

100 primeseries
